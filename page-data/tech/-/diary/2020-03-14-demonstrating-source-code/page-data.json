{"componentChunkName":"component---src-templates-page-js","path":"/tech/-/diary/2020-03-14-demonstrating-source-code/","result":{"data":{"markdownRemark":{"fields":{"slug":"/diary/2020-03-14-demonstrating-source-code/"},"frontmatter":{"category":"tech","tags":["docs","samples"],"title":"Demonstrating source code","date":"2020-03-14T00:00:00.000Z"},"parent":{"__typename":"File","modifiedTime":"2020-03-14T21:37:34.500Z","birthTime":"2020-03-14T21:21:41.913Z"},"html":"<p>The <a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-prismjs/\">gatsby-remark-prismjs</a> plugin is pretty neat for source code formatting.</p>\n<p>I'm tempted though to try the <a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-vscode/\">gatsby-remark-vscode</a> plugin at some stage - it uses the VSCode editor's source code rendering libraries, for far more powerful syntax handling than prismjs.  It can get away with that because it is running at build time, not in a browser, so it doesn't matter if it needs to load a huge pile of dependencies...</p>\n<p>Some quick samples:</p>\n<h2 id=\"rust\" style=\"position:relative;\"><a href=\"#rust\" aria-label=\"rust permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rust</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function\">named_toxicity_indicator_calculator</span><span class=\"token punctuation\">(</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>str<span class=\"token punctuation\">,</span>\n    config<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>CalculatorConfig<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> Option<span class=\"token operator\">&lt;</span>Box<span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> ToxicityIndicatorCalculator<span class=\"token operator\">>></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">match</span> name <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"loc\"</span> <span class=\"token operator\">=></span> <span class=\"token function\">Some</span><span class=\"token punctuation\">(</span>Box<span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>LocCalculator <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"git\"</span> <span class=\"token operator\">=></span> <span class=\"token function\">Some</span><span class=\"token punctuation\">(</span>Box<span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>GitCalculator<span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>\n            GitLogConfig<span class=\"token punctuation\">::</span><span class=\"token function\">default</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">since_years</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>git_years<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"indentation\"</span> <span class=\"token operator\">=></span> <span class=\"token function\">Some</span><span class=\"token punctuation\">(</span>Box<span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>IndentationCalculator <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        _ <span class=\"token operator\">=></span> None<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"bash-script\" style=\"position:relative;\"><a href=\"#bash-script\" aria-label=\"bash script permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bash script</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">firehose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">pushd</span> ~/path/to/garden\n\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Title: \"</span>\n    <span class=\"token builtin class-name\">read</span> title\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Tags: (comma separated) \"</span>\n    <span class=\"token builtin class-name\">read</span> tags\n    <span class=\"token assign-left variable\">jtags</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$tags</span>\"</span> <span class=\"token operator\">|</span> jq -R <span class=\"token string\">'split(\",\")'</span><span class=\"token variable\">)</span></span>\"</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Category: (tech, work, personal, play, world, meta, family, other)\"</span>\n    <span class=\"token builtin class-name\">read</span> category\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"url or text:\"</span>\n    <span class=\"token builtin class-name\">read</span> url\n\n    <span class=\"token assign-left variable\">pdate</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">date</span> +%Y-%m-%d<span class=\"token variable\">`</span></span>\n\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"[{\n<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>title<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">$title</span><span class=\"token entity\" title=\"\\&quot;\">\\\"</span>,\n<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>category<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">$category</span><span class=\"token entity\" title=\"\\&quot;\">\\\"</span>,\n<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>date<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">$pdate</span><span class=\"token entity\" title=\"\\&quot;\">\\\"</span>,\n<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>tags<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token variable\">${jtags}</span>,\n<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>lines<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: [<span class=\"token entity\" title=\"\\&quot;\">\\\"</span><span class=\"token variable\">${url}</span><span class=\"token entity\" title=\"\\&quot;\">\\\"</span>]\n}]\"</span> <span class=\"token operator\">></span> /tmp/fhbit.json\n\n<span class=\"token assign-left variable\">INBOX</span><span class=\"token operator\">=</span>content/firehose/laptop/inbox.json\njq -s <span class=\"token function\">add</span> <span class=\"token variable\">$INBOX</span> /tmp/fhbit.json <span class=\"token operator\">></span> /tmp/fh.json\n<span class=\"token function\">cp</span> /tmp/fh.json <span class=\"token variable\">$INBOX</span>\n\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"updated <span class=\"token variable\">$INBOX</span>\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"shell-commands-with-a-prompt\" style=\"position:relative;\"><a href=\"#shell-commands-with-a-prompt\" aria-label=\"shell commands with a prompt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shell commands with a prompt</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=alice data-host=dev.localhost></span><span></span></span><span class=\"token function\">ls</span> -al\nfoo bar baz bat</code></pre></div>","tableOfContents":"<ul>\n<li><a href=\"#rust\">Rust</a></li>\n<li><a href=\"#bash-script\">Bash script</a></li>\n<li><a href=\"#shell-commands-with-a-prompt\">Shell commands with a prompt</a></li>\n</ul>"}},"pageContext":{"kind":"markdown","slug":"/diary/2020-03-14-demonstrating-source-code/","title":"Demonstrating source code","tags":["docs","samples"],"category":"tech","date":"2020-03-14T00:00:00.000Z","selectedTag":null,"selectedCategory":"tech"}}}